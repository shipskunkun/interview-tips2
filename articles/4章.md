
## 4-2 单线程

单线程 -  单线程就是同时只做一件事，两段 JS 不能同时执行DOM渲染和JS执行不能同时进行。	
原因 - 避免 DOM 渲染的冲突  解决方案 - 异步 
浏览器需要渲染 DOM  JS 可以修改 DOM 结构  JS 执行的时候，浏览器 DOM 渲染会暂停  两段 JS 也不能同时执行（都修改 DOM 就冲突了）   
webworker 支持多线程，但是不能访问 DOM  ##4-7 异步

同步代码，直接执行  
异步函数先放在 异步队列中  待同步函数执行完毕，轮询执行异步队列的函数  ## 4-8 jQuery
js解决异步的方案：
	
	jQuery deferred
	promise
	async\await
	generator
异步队列
	
	什么是异步队列，何时被放入异步队列


## 4-10 ~ 4-16 介绍ajax defered


Query 1.5 的变化：   
jQuery 1.5 之后，支持 deferred   
慢慢演化成一个标准，这个标准叫promise

![img](https://github.com/shipskunkun/interview-tips2/blob/master/images/1.png)


开放封闭原则：

	对扩展开放，对修改封闭
	
	
## 4.17~ 4.20 promise

串联：

A ——> B 

B 写在A 的then 中


```
var src1 = 'https://www.imooc.com/static/img/index/logo_new.png'
var result1 = loadImg(src1)

var src2 = 'https://img1.mukewang.com/545862fe00017c2602200220-100-100.jpg'
var result2 = loadImg(src2)

result1.then(function (img1) {
    console.log('第一个图片加载完成', img1.width)
    return result2  // 重要！！！
}).then(function (img2) {
    console.log('第二个图片加载完成', img2.width)
}).catch(function (ex) {
    console.log(ex)
})
```


Promise.al 接受一个promise对象的数组
待全部完成之后，统一执行success


```
var src1 = 'https://www.imooc.com/static/img/index/logo_new.png'
var result1 = loadImg(src1)

var src2 = 'https://img1.mukewang.com/545862fe00017c2602200220-100-100.jpg'
var result2 = loadImg(src2)

Promise.all([result1, result2]).then(function (datas) {

    //接受到的datas 是一个数组，依次包含多个promise 返回的内容
    console.log('all', datas[0])
    console.log('all', datas[1])
})
	// 接收一个包含多个promise 对象的数组
	// 只要有一个完成，就执行success
Promise.race([result1, result2]).then(function (data) {

    // data 为最先执行完成的promise 的返回值
    console.log('race', data)
})
```



## 4-24 async-await
	
	
	async/await 是最直接的同步写法	
作用： 同步执行代码
await 后面是一个 promise 对象

	
	const load = async function() {
		const result1 = await loadImg(src1)
		const result2 = await loadImg(src2)
	}

作用：改写成同步的写法

> 结果：

和 promise 结合， 但是没有和promise 冲突   
完全是同步的写法，再也没有回调函数  
改变不了js单线程，异步的本质


> 语法：

 + 使用 await ，函数必须用 async 标识
 + await 后面跟的是一个 Promise 实例
 + 需要 babel-polyfill



