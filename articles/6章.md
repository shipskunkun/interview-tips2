## 6章

## 6-6 理解mvvm


 ViewModel 的理解，联系 View 和 Model	
	
![img](https://github.com/shipskunkun/interview-tips2/blob/master/images/6.png)

view 可以通过数据绑定，影响到 model  
model 可以通过事件绑定，影响到 view   


## 6-11 响应式

响应式：vue 如何监听到 data 的每个属性变化？  模板引擎：vue 的模板如何被解析，指令如何处理？  渲染：vue 的模板如何被渲染成 html ？以及渲染过程  	
响应式： defineProperty

```
var vm = {}
var data = {
    name: 'zhangsan',
    age: 20
}

var key, value
for (key in data) {
    (function (key) {
        Object.defineProperty(vm, key, {
            get: function () {
                console.log('get', data[key]) // 监听
                return data[key]
            },
            set: function (newVal) {
                console.log('set', newVal) // 监听
                data[key] = newVal
            }
        })
    })(key)
}
```


	view 的响应式是怎么回事？
关键点：

	关键是理解 Object.defineProperty	将 data 的属性代理到 vm 上


![img](https://github.com/shipskunkun/interview-tips2/blob/master/images/7.png)



## 6-14 模板引擎


1. 模板是什么  2. render 函数  3. render 函数与 vdom  


#### 模板是什么

+ 模板就是 .vue 文件写的 类似html的代码， 本质：字符串  + 有逻辑，如 v-if v-for 等，能判断，能循环  
+ 模板最终还要转换为 html 来显示  

#### 模板最终必须转换成 JS 代码，因为：  
+ 有逻辑（v-if v-for），必须用 JS 才能实现（图灵完备 
+ 转换为 html 渲染页面，必须用 JS 才能实现
+ 因此，模板最重要转换成一个 JS 函数（render 函数）



### render 函数

 with 函数的作用， 通过with 取代 对象的属性读取 . 操作
 
 ```
 var obj = {
 	name: 'zhangsan'
 }
 
 function fn(){
 	console.log(obj.name)
 }
 
 function fn(){
 	with(obj){
 		console.log(name)
 	}
 }
 ```


